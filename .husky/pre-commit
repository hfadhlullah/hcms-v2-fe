#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "ğŸ” Running pre-commit checks..."

# 1. Lint the code
echo "ğŸ¨ checking lint..."
bun lint
if [ $? -ne 0 ]; then
    echo "âŒ Linting failed! Please check your code."
    exit 1
fi

# 2. Type check
echo "ğŸ“ Checking types..."
bunx tsc --noEmit
if [ $? -ne 0 ]; then
    echo "âŒ Type check failed! Please fix type errors."
    exit 1
fi

# 3. Build check (optional, but good for safety if fast enough)
echo "ğŸ—ï¸  Verifying build..."
bun run build
if [ $? -ne 0 ]; then
    echo "âŒ Build failed! Please fix build errors."
    exit 1
fi

echo "âœ… All checks passed! Committing..."
